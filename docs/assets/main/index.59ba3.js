window.__require=function t(e,o,r){function n(i,s){if(!o[i]){if(!e[i]){var p=i.split("/");if(p=p[p.length-1],!e[p]){var a="function"==typeof __require&&__require;if(!s&&a)return a(p,!0);if(c)return c(p,!0);throw new Error("Cannot find module '"+i+"'")}i=p}var l=o[i]={exports:{}};e[i][0].call(l.exports,function(t){return n(e[i][1][t]||t)},l,l.exports,t,e,o,r)}return o[i].exports}for(var c="function"==typeof __require&&__require,i=0;i<r.length;i++)n(r[i]);return n}({AbstarctBuster:[function(t,e,o){"use strict";cc._RF.push(e,"7591fHZvrRP0oBqZd4m57sM","AbstarctBuster");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./BusterView"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxCount=3,e}return n(e,t),e.prototype.onLoad=function(){this.view=this.node.getComponent(i.default),this.initBuster(this.view),this.node.on(cc.Node.EventType.TOUCH_START,this.onActivate,this)},e.prototype.onActivate=function(){this.remainder>0&&this.activate()},e.prototype.onDestroy=function(){this.view.destroy()},e.prototype.initBuster=function(t){this.remainder=this.maxCount,t.updateRemainder(this.remainder)},c([a],e.prototype,"maxCount",void 0),c([p],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./BusterView":"BusterView"}],AbstractBlock:[function(t,e,o){"use strict";cc._RF.push(e,"39e87ksVwdAubO1f6+OQuNh","AbstractBlock");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.AbstractBlock=void 0;var i=cc._decorator.ccclass,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridX=-1,e.gridY=-1,e.gridManager=null,e.explosionEffect=null,e}return n(e,t),e.prototype.setGameController=function(t){this.gridManager=t},e.prototype.setExplosionEffect=function(t){this.explosionEffect=t},e.prototype.createExplosionAt=function(t){if(this.explosionEffect){var e=this.node.parent;if(e){var o=cc.instantiate(this.explosionEffect);this.runExplosion(o,e,t)}}},e.prototype.runExplosion=function(t,e,o){t.setPosition(o),e.addChild(t),t.setScale(.1),t.opacity=0;var r=cc.scaleTo(.1,2).easing(cc.easeBackOut()),n=cc.scaleTo(.2,.8).easing(cc.easeSineIn()),c=cc.fadeTo(.1,255),i=cc.fadeTo(.3,0);t.runAction(cc.sequence(cc.spawn(c,r),cc.spawn(n,i),cc.callFunc(function(){t.destroy()})))},e.prototype.destroyBlocks=function(t,e){var o=this;!t||t.length<2||(t.forEach(function(t,e){t&&t.node&&(o.createExplosionAt(t.node.getPosition()),t.node.runAction(cc.delayTime(.05*e)))}),this.gridManager&&this.gridManager.removeBlocks(t,e,10))},c([i],e)}(cc.Component);o.AbstractBlock=s,cc._RF.pop()},{}],BlockData:[function(t,e){"use strict";cc._RF.push(e,"8b5ccf1v0tF8Kig3FWSHPwO","BlockData"),cc._RF.pop()},{}],BlockSoundConfig:[function(t,e,o){"use strict";cc._RF.push(e,"3072bKGpjhLxriA/Pcw2OEL","BlockSoundConfig"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],Blue:[function(t,e,o){"use strict";cc._RF.push(e,"1077aJUK91HyYK+ABkjcI+k","Blue");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/ColorBlock"),s=cc._decorator.ccclass,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getColorClass=function(){return o},o=c([s],e)}(i.ColorBlock);o.default=p,cc._RF.pop()},{"../Common/ColorBlock":"ColorBlock"}],BombBlock:[function(t,e,o){"use strict";cc._RF.push(e,"46137H9Bt9GmbUvD0IMcM7r","BombBlock");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/SpecialBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getAdjacentBlocks=function(t,e,o,r){var n=this;if(void 0===t&&(t=1),void 0===e&&(e=!1),void 0===o&&(o=!0),void 0===r&&(r=!1),!this.gridManager)return[];for(var c=[],i=-t;i<=t;i++)for(var s=-t;s<=t;s++)0===s&&0===i||c.push({dx:s,dy:i});var p=[];return c.forEach(function(t){var e=n.gridManager.getBlockAt(n.gridX+t.dx,n.gridY+t.dy);e&&p.push(e)}),p},c([p],e)}(i.SpecialBlock));o.default=a,cc._RF.pop()},{"../Common/SpecialBlock":"SpecialBlock"}],BombMax:[function(t,e,o){"use strict";cc._RF.push(e,"1cb61PKJOlMebV6E7naZmdI","BombMax");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./BombBlock"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.power=2,e}return n(e,t),e.prototype.getSpecialType=function(){return{bomb:!0,power:this.power}},c([a({type:cc.Integer})],e.prototype,"power",void 0),c([p],e)}(i.default);o.default=l,cc._RF.pop()},{"./BombBlock":"BombBlock"}],Bomb:[function(t,e,o){"use strict";cc._RF.push(e,"79b55j7MXhA9orXxNVCvypx","Bomb");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./BombBlock"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.power=1,e}return n(e,t),e.prototype.getSpecialType=function(){return{bomb:!0,power:this.power}},c([a({type:cc.Integer})],e.prototype,"power",void 0),c([p],e)}(i.default);o.default=l,cc._RF.pop()},{"./BombBlock":"BombBlock"}],BusterBomb:[function(t,e,o){"use strict";cc._RF.push(e,"c61d8jB+N9EWpepK3Hwx7rL","BusterBomb");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Common/AbstarctBuster"),s=cc._decorator,p=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.power=1,e}return n(e,t),e.prototype.activate=function(){this.node.emit("bomb-buster",this.power),this.node.on("buster-bomb-finish",this.deactivate,this)},e.prototype.deactivate=function(t){cc.tween(this.node).to(.1,{scale:1}).start(),t&&(this.remainder--,this.view.updateRemainder(this.remainder)),this.node.off("buster-bomb-finish")},e.prototype.onDestroy=function(){this.node.off("buster-bomb-finish")},c([a],e.prototype,"power",void 0),c([p],e)}(i.default);o.default=l,cc._RF.pop()},{"./Common/AbstarctBuster":"AbstarctBuster"}],BusterManager:[function(t,e,o){"use strict";cc._RF.push(e,"a45a6VeZ/9HhI041/TXZMWU","BusterManager");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.BusterManager=void 0;var i=t("../BusterBomb"),s=t("../BusterTeleport"),p=t("./AbstarctBuster"),a=t("./BusterView"),l=cc._decorator,u=l.ccclass,f=(l.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.busters=[],e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.node.children.forEach(function(e){var o=e.getComponent(a.default),r=e.getComponent(p.default);r.initBuster(o),t.busters.push(r)})},e.prototype.getBusters=function(){return JSON.parse(JSON.stringify(this.busters))},e.prototype.getBusterTeleport=function(){var t=this.busters.find(function(t){return t instanceof s.default});if(!t)throw cc.error("Buster teleport not found"),new Error("Buster teleport not found");return t},e.prototype.getBusterBomb=function(){var t=this.busters.find(function(t){return t instanceof i.default});if(!t)throw cc.error("Buster bomb not found"),new Error("Buster bomb not found");return t},c([u],e)}(cc.Component));o.BusterManager=f,cc._RF.pop()},{"../BusterBomb":"BusterBomb","../BusterTeleport":"BusterTeleport","./AbstarctBuster":"AbstarctBuster","./BusterView":"BusterView"}],BusterTeleport:[function(t,e,o){"use strict";cc._RF.push(e,"26b40R/ErZF5rLZ9qDyRxDA","BusterTeleport");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./Common/AbstarctBuster"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.activate=function(){this.node.emit("teleport-buster"),this.node.on("buster-teleport-finish",this.deactivate,this)},e.prototype.deactivate=function(t){cc.tween(this.node).to(.1,{scale:1}).start(),t&&(this.remainder--,this.view.updateRemainder(this.remainder)),this.node.off("buster-teleport-finish")},e.prototype.onDestroy=function(){this.node.off("buster-teleport-finish")},c([p],e)}(i.default));o.default=a,cc._RF.pop()},{"./Common/AbstarctBuster":"AbstarctBuster"}],BusterView:[function(t,e,o){"use strict";cc._RF.push(e,"158d2gHS2lGi52bvaH2JDoU","BusterView");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../InfoArea"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.infoArea=null,e}return n(e,t),e.prototype.onLoad=function(){this.infoArea=this.node.getComponent(i.default),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},e.prototype.onTouchStart=function(){this.remainder>0?cc.tween(this.node).to(.1,{scale:1.2}).start():cc.tween(this.node).to(.1,{scale:1}).start()},e.prototype.updateRemainder=function(t){this.remainder=t,this.infoArea&&this.infoArea.setCurrentCount(t)},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.onTouchStart,this)},c([p],e)}(cc.Component));o.default=a,cc._RF.pop()},{"../InfoArea":"InfoArea"}],ColorBlock:[function(t,e,o){"use strict";cc._RF.push(e,"80800iBoAxHtaHN9qZXUbET","ColorBlock");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.ColorBlock=void 0;var i=t("./AbstractBlock"),s=cc._decorator.ccclass,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countPoints=10,e}return n(e,t),e.prototype.onBlockClick=function(){var t=this;if(this.gridManager.isBombBusterActive())this.bombBusterFire(this.gridManager.getBombPower());else if(this.gridManager.isTeleportBusterActive())this.gridManager.teleportBusterFire(this);else{var e=this.findConnectedBlocks(this.getColorClass());this.highlightBlocks(e),this.scheduleOnce(function(){return t.destroyBlocks(e,t)},.5)}},e.prototype.findConnectedBlocks=function(t){var e=new Set;return this.findConnected(this,t,e),Array.from(e)},e.prototype.findConnected=function(t,e,o){var r=this;o.has(t)||(o.add(t),t.getAdjacentBlocks(1,!1,!1,!1).filter(function(t){return t instanceof e}).forEach(function(t){return r.findConnected(t,e,o)}))},e.prototype.getAdjacentBlocks=function(t,e){var o=this;if(void 0===e&&(e=!1),!this.gridManager)return[];var r=[{dx:0,dy:t},{dx:t,dy:0},{dx:0,dy:-t},{dx:-t,dy:0}];e&&r.push({dx:t,dy:t},{dx:t,dy:-t},{dx:-t,dy:-t},{dx:-t,dy:t});var n=[];return r.forEach(function(t){var e=o.gridManager.getBlockAt(o.gridX+t.dx,o.gridY+t.dy);e&&n.push(e)}),n},e.prototype.highlightBlocks=function(t){t.forEach(function(t,e){cc.tween(t.node).delay(.05*e).to(.1,{scale:1.2}).to(.1,{scale:1}).start()})},e.prototype.highlightBombBlocks=function(t){t.forEach(function(t){cc.tween(t.node).to(.1,{scale:1.2}).to(.1,{scale:1}).start()})},e.prototype.bombBusterFire=function(t){var e=this.getAdjacentBlocks(t,!0);this.highlightBombBlocks(e),this.destroyBlocks(e,null),this.gridManager.bombBusterFinish(!0)},e.prototype.getCountPoints=function(){return this.countPoints},c([s],e)}(i.AbstractBlock);o.ColorBlock=p,cc._RF.pop()},{"./AbstractBlock":"AbstractBlock"}],FinishGame:[function(t,e,o){"use strict";cc._RF.push(e,"a3356a/EhBDFq/7FjJ/O7/5","FinishGame");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popupNode=null,e.restartButton=null,e.messageLabel=null,e.backgroundOverlay=null,e}return n(e,t),e.prototype.onLoad=function(){this.backgroundOverlay.zIndex=0,this.popupNode.zIndex=1,this.popupNode.active=!1,this.backgroundOverlay.active=!1,this.restartButton.on(cc.Node.EventType.TOUCH_END,this.onRestart,this)},e.prototype.showPopup=function(t,e){void 0===t&&(t="Game Over"),void 0===e&&(e=!1),this.popupNode.zIndex=this.backgroundOverlay.zIndex+1,this.messageLabel.string=t,this.popupNode.active=!0,this.backgroundOverlay.active=!0,this.messageLabel.node.color=e?cc.Color.GREEN:cc.Color.RED,this.popupNode.opacity=255,this.backgroundOverlay.opacity=160,this.popupNode.scale=0,cc.tween(this.backgroundOverlay).to(.2,{opacity:160}).start(),cc.tween(this.popupNode).to(.3,{scale:1},{easing:"backOut"}).start()},e.prototype.hidePopup=function(){var t=this;cc.tween(this.popupNode).to(.2,{scale:0},{easing:"backIn"}).call(function(){t.popupNode.active=!1,t.backgroundOverlay.active=!1}).start(),cc.tween(this.backgroundOverlay).to(.2,{opacity:0}).start()},e.prototype.onRestart=function(){this.hidePopup(),this.node.emit("restart-game")},c([p(cc.Node)],e.prototype,"popupNode",void 0),c([p(cc.Node)],e.prototype,"restartButton",void 0),c([p(cc.RichText)],e.prototype,"messageLabel",void 0),c([p(cc.Node)],e.prototype,"backgroundOverlay",void 0),c([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"d6434eRRs9BG4Foiu0scmJf","Game");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./busters/Common/BusterManager"),s=t("./FinishGame"),p=t("./GridManager"),a=cc._decorator,l=a.ccclass,u=a.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countMoves=3,e.targetPonts=500,e.finishGameNode=null,e.busterBomb=null,e.busterTeleport=null,e.busters=null,e.gridManager=null,e.finishGame=null,e.bombBusterActive=!1,e.teleportBusterActive=!1,e.bombPower=1,e}return n(e,t),e.prototype.onLoad=function(){this.enterFullscreen();var t=this.node.parent;this.canvas=t.getComponent(cc.Canvas),this.finishGameNode.on("restart-game",this.initGame,this),this.finishGame=this.finishGameNode.getComponent(s.default),this.busterManager=this.busters.getComponent(i.BusterManager),this.gridManager.onLoad(),this.initGame()},e.prototype.initGame=function(){this.gridManager.validateSettings()&&(this.currentCountMoves=this.countMoves,this.busterManager.onLoad(),this.currentPoints=0,this.movesTextBlock.string=this.currentCountMoves.toString(),this.targetTextBlock.string="/"+this.targetPonts,this.pontsTextBlock.string=""+this.currentPoints,this.gridManager.generateGrid())},e.prototype.checkStatusGame=function(t){this.currentPoints+=t,this.pontsTextBlock.string=this.currentPoints.toString(),this.makeMove()},e.prototype.makeMove=function(){this.currentCountMoves--,this.movesTextBlock.string=this.currentCountMoves.toString(),this.currentPoints>=this.targetPonts?this.stopGame(!0):0===this.currentCountMoves&&this.stopGame(!1)},e.prototype.stopGame=function(t){t?this.finishGame.showPopup("You win",t):this.finishGame.showPopup("Game over",t)},e.prototype.getBombBusterActive=function(){return this.bombBusterActive},e.prototype.setBombBusterActive=function(t){this.bombBusterActive=t},e.prototype.getTeleportBusterActive=function(){return this.teleportBusterActive},e.prototype.setTeleportBusterActive=function(t){this.teleportBusterActive=t},e.prototype.getBombPower=function(){return this.bombPower},e.prototype.setBombPower=function(t){this.bombPower=t},e.prototype.getBusterManager=function(){return this.busterManager},e.prototype.enterFullscreen=function(){try{document.documentElement.requestFullscreen&&document.documentElement.requestFullscreen()}catch(t){console.log("Fullscreen error:",t)}},c([u({type:cc.Integer})],e.prototype,"countMoves",void 0),c([u({type:cc.Integer})],e.prototype,"targetPonts",void 0),c([u(cc.Node)],e.prototype,"finishGameNode",void 0),c([u({type:cc.Node})],e.prototype,"busterBomb",void 0),c([u({type:cc.Node})],e.prototype,"busterTeleport",void 0),c([u(cc.RichText)],e.prototype,"pontsTextBlock",void 0),c([u(cc.RichText)],e.prototype,"movesTextBlock",void 0),c([u(cc.RichText)],e.prototype,"targetTextBlock",void 0),c([u(cc.Node)],e.prototype,"busters",void 0),c([u(p.default)],e.prototype,"gridManager",void 0),c([l],e)}(cc.Component);o.default=f,cc._RF.pop()},{"./FinishGame":"FinishGame","./GridManager":"GridManager","./busters/Common/BusterManager":"BusterManager"}],Green:[function(t,e,o){"use strict";cc._RF.push(e,"d99c543fOhANKWSS5vcTAoV","Green");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/ColorBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getColorClass=function(){return o},o=c([p],e)}(i.ColorBlock));o.default=a,cc._RF.pop()},{"../Common/ColorBlock":"ColorBlock"}],GridManager:[function(t,e,o){"use strict";cc._RF.push(e,"c5c4aHhyxlILJ6JB0iAG7DO","GridManager");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__assign||function(){return(c=Object.assign||function(t){for(var e,o=1,r=arguments.length;o<r;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},i=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__awaiter||function(t,e,o,r){return new(o||(o=Promise))(function(n,c){function i(t){try{p(r.next(t))}catch(e){c(e)}}function s(t){try{p(r.throw(t))}catch(e){c(e)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(i,s)}p((r=r.apply(t,e||[])).next())})},p=this&&this.__generator||function(t,e){var o,r,n,c,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return c={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function s(t){return function(e){return p([t,e])}}function p(c){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,r&&(n=2&c[0]?r.return:c[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,c[1])).done)return n;switch(r=0,n&&(c=[2&c[0],n.value]),c[0]){case 0:case 1:n=c;break;case 4:return i.label++,{value:c[1],done:!1};case 5:i.label++,r=c[1],c=[0];continue;case 7:c=i.ops.pop(),i.trys.pop();continue;default:if(!(n=(n=i.trys).length>0&&n[n.length-1])&&(6===c[0]||2===c[0])){i=0;continue}if(3===c[0]&&(!n||c[1]>n[0]&&c[1]<n[3])){i.label=c[1];break}if(6===c[0]&&i.label<n[1]){i.label=n[1],n=c;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(c);break}n[2]&&i.ops.pop(),i.trys.pop();continue}c=e.call(t,i)}catch(s){c=[6,s],r=0}finally{o=n=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=t("./blocks/TileFactory"),l=t("./Game"),u=t("./Common/PositionCalculator"),f=t("./blocks/Common/SpecialBlock"),d=cc._decorator,h=d.ccclass,y=d.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.gridWidth=8,e.gridHeight=8,e.gameGrid=null,e.explosionEffect=null,e.swappedBlocks={},e.grid=[],e}return n(e,t),e.prototype.onLoad=function(){this.tileFactory=this.tileFactoryNode.getComponent(a.default),this.tileFactory.onLoad();var t=this.positionCalculator.calculateGridStartPosition(this.gridWidth,this.gridHeight,this.tileFactory.getTileSize(),this.tileFactory.getTilepadding());this.startX=t.startX,this.startY=t.startY,this.game=this.gameNode.getComponent(l.default),this.game.busterBomb.on("bomb-buster",this.bombBusterEmitted,this),this.game.busterTeleport.on("teleport-buster",this.teleportBusterEmitted,this)},e.prototype.validateSettings=function(){return this.game?!(this.tileFactory.getCountSprites()<4&&(cc.error("Not enough block sprites assigned!"),1)):(cc.error("Game not assigned!"),!1)},e.prototype.generateGrid=function(){this.grid=[],this.gameGrid.removeAllChildren();for(var t=0;t<this.gridHeight;t++){this.grid[t]=[];for(var e=0;e<this.gridWidth;e++)this.grid[t][e]=this.tileFactory.createTile(e,t,!1)}},e.prototype.getBlockAt=function(t,e){return e>=0&&e<this.grid.length&&t>=0&&t<this.grid[e].length?this.grid[e][t]:null},e.prototype.removeBlocks=function(t,e,o){return void 0===o&&(o=0),s(this,void 0,Promise,function(){var r,n,c=this;return p(this,function(){return t.length<2?[2]:(r=e instanceof f.SpecialBlock,n=0,t.forEach(function(i,s){i&&c.grid[i.gridY][i.gridX]===i&&(s>0&&!c.game.getBombBusterActive()&&!r?n+=o*s:n+=o,c.grid[i.gridY][i.gridX]=null,i==e&&t.length>4&&!r&&(c.grid[i.gridY][i.gridX]=c.tileFactory.createSpecialTile(e)),i.node.destroy())}),this.game.checkStatusGame(n),this.processFallingBlocks(),[2])})})},e.prototype.processFallingBlocks=function(){for(var t=0;t<this.gridWidth;t++){for(var e=-1,o=this.gridHeight-1;o>=0;o--)null===this.grid[o][t]&&-1===e?e=o:null!==this.grid[o][t]&&-1!==e&&(this.moveBlockDown(t,o,e),e--);this.generateNewBlocksForColumn(t,e)}},e.prototype.moveBlockDown=function(t,e,o){var r=this.grid[e][t];this.grid[e][t]=null,this.grid[o][t]=r,r.gridY=o;var n=this.getWorldPosition(t,o);cc.tween(r.node).to(.3,{position:n},{easing:"sineOut"}).start()},e.prototype.generateNewBlocksForColumn=function(t,e){for(;e>=0;){var o=this.tileFactory.createTile(t,e,!1);this.grid[e][t]=o;var r=e-(this.gridHeight+1),n=this.getWorldPosition(t,r),c=this.getWorldPosition(t,e);o.node.position=n,cc.tween(o.node).to(.9,{position:c},{easing:"backOut"}).start(),e--}},e.prototype.getWorldPosition=function(t,e){return this.positionCalculator.getWorldPosition(t,e,this.startX,this.startY,this.tileFactory.getTileSize(),this.tileFactory.getTilepadding())},e.prototype.bombBusterEmitted=function(t){this.game.setBombPower(t),this.game.getBombBusterActive()?this.bombBusterFinish(!1):this.game.setBombBusterActive(!0),this.teleportBusterFinish(!1)},e.prototype.isBombBusterActive=function(){return this.game.getBombBusterActive()},e.prototype.bombBusterFinish=function(t){this.game.setBombBusterActive(!1),this.game.busterBomb.emit("buster-bomb-finish",t)},e.prototype.getBombPower=function(){return this.game.getBombPower()},e.prototype.teleportBusterEmitted=function(){this.game.getTeleportBusterActive()?this.teleportBusterFinish(!1):this.game.setTeleportBusterActive(!0),this.bombBusterFinish(!1)},e.prototype.isTeleportBusterActive=function(){return this.game.getTeleportBusterActive()},e.prototype.teleportBusterFinish=function(t){this.game.busterTeleport.emit("buster-teleport-finish",t),this.game.setTeleportBusterActive(!1),this.clearSwappedBlocks()},e.prototype.teleportBusterFire=function(t){this.getSwappedBlocks().block1?cc.tween(t.node).to(.1,{scale:1.2}).call(this.startProcessTeleport.bind(this,t)).start():(cc.tween(t.node).to(.1,{scale:1.2}).start(),this.setSwappedBlocks({block1:t,block2:null}))},e.prototype.startProcessTeleport=function(t){var e=this.getSwappedBlocks();e.block2=t,this.swapBlocks(e),Object.keys(e).forEach(function(t){cc.tween(e[t].node).to(.1,{scale:1}).start()}),this.setSwappedBlocks(this.getEmptySwappedBlocks())},e.prototype.swapBlocks=function(t){if(this.validateSwapInput(t)){var e=this.getBlockData(t.block1),o=this.getBlockData(t.block2);this.updateGridPositions(t),this.swapBlockProperties(t.block1,o),this.swapBlockProperties(t.block2,e),this.teleportBusterFinish(!0)}},e.prototype.validateSwapInput=function(t){var e,o,r,n;return!!((null===(o=null===(e=null==t?void 0:t.block1)||void 0===e?void 0:e.node)||void 0===o?void 0:o.isValid)&&(null===(n=null===(r=null==t?void 0:t.block2)||void 0===r?void 0:r.node)||void 0===n?void 0:n.isValid))||(cc.error("Invalid blocks for swap!"),!1)},e.prototype.getBlockData=function(t){return{position:t.node.position.clone(),gridX:t.gridX,gridY:t.gridY,name:"Tile_"+t.gridX+"_"+t.gridY}},e.prototype.updateGridPositions=function(t){var e=t.block1,o=t.block2;this.grid[e.gridY][e.gridX]=o,this.grid[o.gridY][o.gridX]=e},e.prototype.swapBlockProperties=function(t,e){t.node.position=e.position,t.gridX=e.gridX,t.gridY=e.gridY,t.node.name=e.name},e.prototype.getEmptySwappedBlocks=function(){return{block1:null,block2:null}},e.prototype.getSwappedBlocks=function(){return c({},this.swappedBlocks)},e.prototype.setSwappedBlocks=function(t){this.swappedBlocks=t},e.prototype.clearSwappedBlocks=function(){this.swappedBlocks={block1:null,block2:null}},e.prototype.getGridWidth=function(){return this.gridWidth},e.prototype.getGridHeight=function(){return this.gridHeight},i([y(u.PositionCalculator)],e.prototype,"positionCalculator",void 0),i([y({type:cc.Integer})],e.prototype,"gridWidth",void 0),i([y({type:cc.Integer})],e.prototype,"gridHeight",void 0),i([y(cc.Node)],e.prototype,"tileFactoryNode",void 0),i([y({type:cc.Node})],e.prototype,"gameGrid",void 0),i([y({type:cc.Prefab})],e.prototype,"explosionEffect",void 0),i([y(cc.Node)],e.prototype,"gameNode",void 0),i([h],e)}(cc.Component);o.default=_,cc._RF.pop()},{"./Common/PositionCalculator":"PositionCalculator","./Game":"Game","./blocks/Common/SpecialBlock":"SpecialBlock","./blocks/TileFactory":"TileFactory"}],IGridManager:[function(t,e,o){"use strict";cc._RF.push(e,"d55ba9+Xk1KcI2K6bpHLkW7","IGridManager"),Object.defineProperty(o,"__esModule",{value:!0}),cc._RF.pop()},{}],InfoArea:[function(t,e,o){"use strict";cc._RF.push(e,"25742yLAFpAuKoNXmy4Q9NW","InfoArea");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=i.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.countLabel=null,e}return n(e,t),e.prototype.setCurrentCount=function(t){this.countLabel.string=t.toString()},c([p(cc.RichText)],e.prototype,"countLabel",void 0),c([s],e)}(cc.Component);o.default=a,cc._RF.pop()},{}],PositionCalculator:[function(t,e,o){"use strict";cc._RF.push(e,"2f5b8KHB+1BFaq2KaYYZXJt","PositionCalculator");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.PositionCalculator=void 0;var i=cc._decorator.ccclass,s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.calculateGridStartPosition=function(t,e,o,r){return{startX:-(t*(o+r)-r)/2+o/2,startY:(e*(o+r)-r)/2-o/2}},e.prototype.getWorldPosition=function(t,e,o,r,n,c){return new cc.Vec3(o+t*(n+c),r-e*(n+c),0)},c([i],e)}(cc.Component);o.PositionCalculator=s,cc._RF.pop()},{}],Position:[function(t,e){"use strict";cc._RF.push(e,"d0ea7N2mYNG5qVLBUsiYXeI","Position"),cc._RF.pop()},{}],Purpure:[function(t,e,o){"use strict";cc._RF.push(e,"899edbU4fVLNqsRcl63gdqq","Purpure");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/ColorBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getColorClass=function(){return o},o=c([p],e)}(i.ColorBlock));o.default=a,cc._RF.pop()},{"../Common/ColorBlock":"ColorBlock"}],Red:[function(t,e,o){"use strict";cc._RF.push(e,"0658cSgZh9Jd6i2uxLJB3qH","Red");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/ColorBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getColorClass=function(){return o},o=c([p],e)}(i.ColorBlock));o.default=a,cc._RF.pop()},{"../Common/ColorBlock":"ColorBlock"}],RocketBlock:[function(t,e,o){"use strict";cc._RF.push(e,"98722x6E0RNxJaj+5tHNctJ","RocketBlock");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/SpecialBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getAdjacentBlocks=function(t,e,o,r){if(void 0===t&&(t=1),void 0===e&&(e=!1),void 0===o&&(o=!0),void 0===r&&(r=!1),!this.gridManager)return[];for(var n=[],c=0;c<this.gridManager.getGridWidth();c++){var i=r?this.gridManager.getBlockAt(this.gridX,c):this.gridManager.getBlockAt(c,this.gridY);i&&n.push(i)}return n},c([p],e)}(i.SpecialBlock));o.default=a,cc._RF.pop()},{"../Common/SpecialBlock":"SpecialBlock"}],RocketsHorizontal:[function(t,e,o){"use strict";cc._RF.push(e,"189abKPoQdA3L66IywH9+Ck","RocketsHorizontal");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./RocketBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getSpecialType=function(){return{rocket:!0,isVertical:!1}},c([p],e)}(i.default));o.default=a,cc._RF.pop()},{"./RocketBlock":"RocketBlock"}],RocketsVertical:[function(t,e,o){"use strict";cc._RF.push(e,"b2baceiY95O2Jfgm/ml7Pvd","RocketsVertical");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./RocketBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getSpecialType=function(){return{rocket:!0,isVertical:!0}},c([p],e)}(i.default));o.default=a,cc._RF.pop()},{"./RocketBlock":"RocketBlock"}],Rockets:[function(t,e,o){"use strict";cc._RF.push(e,"82483T306ZKeYmbfSN3b4L5","Rockets");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./RocketBlock"),s=cc._decorator,p=s.ccclass,a=(s.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getSpecialType=function(){return{rocket:!0,isVertical:!0}},c([p],e)}(i.default));o.default=a,cc._RF.pop()},{"./RocketBlock":"RocketBlock"}],SceneLoader:[function(t,e,o){"use strict";cc._RF.push(e,"ec93ewsvQpELK0ll2SVN2W9","SceneLoader");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,s=i.ccclass,p=(i.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){this.isMobile()?cc.director.loadScene("MobileScene"):cc.director.loadScene("DesktopScene")},e.prototype.isMobile=function(){return!!cc.sys.isMobile||document.getElementById("GameDiv").offsetWidth<500},c([s],e)}(cc.Component));o.default=p,cc._RF.pop()},{}],SpecialBlockType:[function(t,e){"use strict";cc._RF.push(e,"cef33gqfXJJOrTXoIna3fL8","SpecialBlockType"),cc._RF.pop()},{}],SpecialBlock:[function(t,e,o){"use strict";cc._RF.push(e,"a9e5cXP1sRBzJ+zAeUj39NS","SpecialBlock");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0}),o.SpecialBlock=void 0;var i=t("./AbstractBlock"),s=cc._decorator.ccclass,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onBlockClick=function(){var t=this,e=this.getSpecialType(),o=this.getAdjacentBlocks(e.power,e.bomb,e.rocket,e.isVertical);o.push(this),this.highlightBloks(o),this.scheduleOnce(function(){return t.destroyBlocks(o,t)},.5)},e.prototype.highlightBloks=function(t){t.forEach(function(t){cc.tween(t.node).delay(.05).to(.1,{scale:1.2}).to(.1,{scale:1}).start()})},c([s],e)}(i.AbstractBlock);o.SpecialBlock=p,cc._RF.pop()},{"./AbstractBlock":"AbstractBlock"}],TileFactory:[function(t,e,o){"use strict";cc._RF.push(e,"6b990CxpH1I6poz2ehfY3KD","TileFactory");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/PositionCalculator"),s=t("../GridManager"),p=cc._decorator,a=p.ccclass,l=p.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tileSize=64,e.tilePadding=2,e.gameGridNode=null,e.blockSprites=[],e.specialBlockSprites=[],e.explosionEffect=null,e.gridManager=null,e}return n(e,t),e.prototype.onLoad=function(){this.gridManager=this.gameGridNode.getComponent(s.default);var t=this.positionCalculator.calculateGridStartPosition(this.gridManager.getGridWidth(),this.gridManager.getGridHeight(),this.tileSize,this.tilePadding);this.startX=t.startX,this.startY=t.startY},e.prototype.createTile=function(t,e,o){var r=this.createBaseTileNode(t,e),n=this.configureTileSprite(r,o?this.specialBlockSprites:this.blockSprites),c=this.addBlockBehavior(r,n.spriteFrame.name);return c.gridX=t,c.gridY=e,this.gameGridNode.addChild(r),c},e.prototype.createBaseTileNode=function(t,e,o){var r=new cc.Node("Tile_"+t+"_"+e);return r.width=this.tileSize,r.height=this.tileSize,o?r.setPosition(o):r.setPosition(this.startX+t*(this.tileSize+this.tilePadding),this.startY-e*(this.tileSize+this.tilePadding)),r},e.prototype.configureTileSprite=function(t,e){var o=t.addComponent(cc.Sprite);o.type=cc.Sprite.Type.SIMPLE,o.sizeMode=cc.Sprite.SizeMode.CUSTOM,o.node.width=t.width,o.node.height=t.height;var r=Math.floor(Math.random()*e.length);return o.spriteFrame=e[r],console.log(o.node.scaleY),o},e.prototype.createSpecialTile=function(t){var e=this.createBaseTileNode(t.gridX,t.gridY,t.node.position),o=this.configureTileSprite(e,this.specialBlockSprites),r=this.addBlockBehavior(e,o.spriteFrame.name,!0);return r.gridX=t.gridX,r.gridY=t.gridY,this.gameGridNode.addChild(e),r},e.prototype.addBlockBehavior=function(t,e,o){void 0===o&&(o=!1);var r=this.getBehaviorComponent(e,o);if(!r)return cc.error("Behavior component not found for sprite: "+e),null;var n=t.addComponent(r);return this.configureBlockBehavior(n,t),n},e.prototype.configureBlockBehavior=function(t,e){t.setGameController(this.gameGridNode.getComponent(s.default)),this.explosionEffect&&t.setExplosionEffect(this.explosionEffect),e.on(cc.Node.EventType.TOUCH_END,function(){return t.onBlockClick()})},e.prototype.getBehaviorComponent=function(t,e){var o={normal:{block_red:"Red",block_yellow:"Yellow",block_green:"Green",block_blue:"Blue",block_purpure:"Purpure"},special:{block_bomb:"Bomb",block_bomb_max:"BombMax",block_rakets:"Rockets",block_rockets_horisontal:"RocketsHorizontal"}};return(e?o.special:o.normal)[t]||null},e.prototype.getCountSprites=function(){return this.blockSprites.length},e.prototype.getTileSize=function(){return this.tileSize},e.prototype.getTilepadding=function(){return this.tilePadding},e.prototype.start=function(){},c([l(i.PositionCalculator)],e.prototype,"positionCalculator",void 0),c([l({type:cc.Integer})],e.prototype,"tileSize",void 0),c([l({type:cc.Integer})],e.prototype,"tilePadding",void 0),c([l({type:cc.Node})],e.prototype,"gameGridNode",void 0),c([l({type:[cc.SpriteFrame]})],e.prototype,"blockSprites",void 0),c([l({type:[cc.SpriteFrame]})],e.prototype,"specialBlockSprites",void 0),c([l({type:cc.Prefab})],e.prototype,"explosionEffect",void 0),c([a],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Common/PositionCalculator":"PositionCalculator","../GridManager":"GridManager"}],Yellow:[function(t,e,o){"use strict";cc._RF.push(e,"ad19aWaWS9JT5YhrSjj6G8f","Yellow");var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,r){var n,c=arguments.length,i=c<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,r);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(i=(c<3?n(i):c>3?n(e,o,i):n(e,o))||i);return c>3&&i&&Object.defineProperty(e,o,i),i};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../Common/ColorBlock"),s=cc._decorator.ccclass,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.prototype.getColorClass=function(){return o},o=c([s],e)}(i.ColorBlock);o.default=p,cc._RF.pop()},{"../Common/ColorBlock":"ColorBlock"}],temp:[function(t,e){"use strict";cc._RF.push(e,"fb5a4MR0wxPG558mGj3Q6Dk","temp"),cc._RF.pop()},{}]},{},["PositionCalculator","FinishGame","Game","GridManager","SceneLoader","Blue","Green","Purpure","Red","Yellow","AbstractBlock","ColorBlock","SpecialBlock","Bomb","BombBlock","BombMax","RocketBlock","Rockets","RocketsHorizontal","RocketsVertical","TileFactory","temp","BusterBomb","BusterTeleport","AbstarctBuster","BusterManager","BusterView","InfoArea","BlockData","BlockSoundConfig","IGridManager","Position","SpecialBlockType"]);